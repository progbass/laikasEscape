define(["easel","tween","preload"],function(){var e=Backbone.View.extend({font:"Bowlby One SC",font_color:"#f6edda",index:0,sprite:null,overlay:null,width:577,height:327,margin:80,window:null,window_background:null,window_content:null,window_img_src:["img/modalWindow_sprite.png"],window_frame_settings:[[0,0,577,327,0,288,163],[577,0,477,327,0,238,163],[1054,0,716,437,0,358,218]],initialize:function(){var e=this;_.bindAll(e,"drawOverlay","show","hide","setWindow","redraw"),this.sprite=new createjs.Container,this.drawOverlay();var i=new createjs.SpriteSheet({images:this.window_img_src,frames:this.window_frame_settings,animations:{intro:0,level:1,gameOver:2,pause:1,end:2}});this.window_background=new createjs.Sprite(i),this.window_background.stop(),this.window=new createjs.Container,this.window.y=-300,this.window.addChild(this.window_background),this.sprite.addChild(this.window),this.sprite.setChildIndex(this.window,1),this.createIntroWindow(),this.createLevelWindow(),this.createPauseWindow(),this.createGameOverWindow(),this.setWindow("intro")},drawOverlay:function(e,i){this.overlay&&this.sprite.removeChild(this.overlay);var t=e||1280,n=i||768;this.overlay=new createjs.Shape((new createjs.Graphics).beginFill("rgba(0,0,0,.22)").drawRect(0,0,t,n)),this.overlay.width=t,this.overlay.height=n,this.overlay.x=-(t/2),this.sprite.addChild(this.overlay),this.sprite.setChildIndex(this.overlay,0)},redraw:function(e,i){this.drawOverlay(e,i),this.window.y=this.overlay.height/2},createIntroWindow:function(){var e=this,i=new createjs.Container;i.name="intro",i.visible=!1;var t=new createjs.Text("Rescue LAIKA from being devoured by the aliens!","1.775em "+this.font,this.font_color);t.name="text",t.textAlign="center",t.lineWidth=this.width-this.margin,t.lineHeight=29,t.y=-100,i.addChild(t),this.window.addChild(i)},createLevelWindow:function(){var e=this,i=new createjs.Container;i.name="level",i.visible=!1;var t=new createjs.Text("Level "+this.level,"52px "+this.font,this.font_color);t.name="text",t.textAlign="center",t.lineWidth=this.width-this.margin,t.lineHeight=30,t.y=-20,i.addChild(t),this.window.addChild(i)},createPauseWindow:function(){var e=this,i=new createjs.Container;i.name="pause",i.visible=!1;var t=new createjs.Text("Pause","52px "+this.font,this.font_color);t.name="text",t.textAlign="center",t.lineWidth=this.width-this.margin,t.lineHeight=30,t.y=-30,i.addChild(t),this.window.addChild(i)},createGameOverWindow:function(){var e=this,i=new createjs.Container;i.name="gameOver",i.visible=!1;var t=new createjs.Text("Game Over","48px "+this.font,this.font_color);t.name="text",t.textAlign="center",t.lineWidth=this.width-this.margin,t.lineHeight=30,t.y=-50,i.addChild(t),this.window.addChild(i)},createEndWindow:function(){var e=this,i=new createjs.Container;i.name="end",i.visible=!1;var t=new createjs.Text("The End","48px "+this.font,this.font_color);t.name="text",t.textAlign="center",t.lineWidth=this.width-this.margin,t.lineHeight=30,t.y=-100,i.addChild(t),this.window.addChild(i)},removeListeners:function(){var e=this;this.sprite.removeAllEventListeners()},setWindow:function(e,i){this.window_background.gotoAndStop(e);for(var t=0;t<this.window.children.length;t++){var n=this.window.children[t];n!==this.window_background&&(n.visible=!1),n.name===e&&(i&&(n.getChildByName("text").text=i),n.visible=!0)}},show:function(){var e=this;createjs.Tween.get(this.window,{override:!0,ignoreGlobalPause:!0}).wait(620).to({y:this.overlay.height/2},480,createjs.Ease.backOut),this.overlay.visible=!0,this.overlay.alpha=0,createjs.Tween.get(this.overlay,{override:!0,ignoreGlobalPause:!0}).to({alpha:1},420)},hide:function(){var e=this;this.removeListeners(),createjs.Tween.get(this.window,{override:!0,ignoreGlobalPause:!0}).wait(100).to({y:-this.height},480,createjs.Ease.backIn),createjs.Tween.get(this.overlay,{override:!0,ignoreGlobalPause:!0}).to({alpha:0,visible:!1},420)},close:function(){this.sprite.removeAllEventListeners(),this.unbind(),this.remove()}});return e});